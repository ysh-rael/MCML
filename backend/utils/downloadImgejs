const axios = require('axios');
const fs = require('fs');

const { Print } = require('./print');
const print = new Print({ informa: 'Utils downloadImge', alerta: 'Utils downloadImge', erro: 'Utils downloadImge', sucesso: 'Utils downloadImge' });

async function downloadImge(localPath, url) {
    try {
        const resposta = await axios({
            method: 'get',
            url: url,
            responseType: 'stream',
        });

        // Salva a imagem localmente
        await resposta.data.pipe(fs.createWriteStream(localPath));

       return localPath
    } catch (erro) {
        print.erro(`Catch: ${erro.message}`)
        console.log(erro)
        print.informa(`url`)
        console.log(url)
        return null
    }
}

module.exports = { downloadImge }
